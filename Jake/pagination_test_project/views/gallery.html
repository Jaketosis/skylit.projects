<!DOCTYPE html>
<html lang="en">

<head>
  <script>var ticker = 1;var subTicker=1</script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Blog Home - Start Bootstrap Template</title>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

  <!-- Custom styles for this template -->
  <link href="css/blog-home.css" rel="stylesheet">

</head>

<body style="padding-top: 56px;" >

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
      <a class="navbar-brand" href="#">I heard you like keyboards</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#">Home
              <span class="sr-only">(current)</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Services</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Page Content -->
  <div class="container">

    <div class="row">

      <!-- Blog Entries Column -->
      <div class="col-md-8" id="main_feed">

        <h1 class="my-4">IC and GB Feed
          <h3>I'm not affiliated with GH</h3>
        </h1>
        
        <div class ="container" id="main_container">


        
        
        

        

       
        </div>
        <!-- Pagination -->
        <ul class="pagination justify-content-center mb-4">
          <li class="page-item">
            <a class="page-link" id="showLessButton">&larr; Show Less</a>
          </li>
          <li class="page-item">
            <a class="page-link" id="showMoreButton">Show More &rarr;</a>
          </li>
        </ul>

      </div>

      <!-- Sidebar Widgets Column -->
      <div class="col-md-4">

        <!-- Search Widget -->
        <div class="card my-4">
          <h5 class="card-header">Search</h5>
          <div class="card-body">
            <div class="input-group">
              <input type="text" class="form-control" placeholder="Search for...">
              <span class="input-group-append">
                <button class="btn btn-secondary" type="button">Go!</button>
              </span>
            </div>
          </div>
        </div>

        <!-- Categories Widget -->
        <div class="card my-4">
          <h5 class="card-header">Categories</h5>
          <div class="card-body">
            <div class="row">
              <div class="col-lg-6">
                <ul class="list-unstyled mb-0">
                  <li>
                    <a href="#">Web Design</a>
                  </li>
                  <li>
                    <a href="#">HTML</a>
                  </li>
                  <li>
                    <a href="#">Freebies</a>
                  </li>
                </ul>
              </div>
              <div class="col-lg-6">
                <ul class="list-unstyled mb-0">
                  <li>
                    <a href="#">JavaScript</a>
                  </li>
                  <li>
                    <a href="#">CSS</a>
                  </li>
                  <li>
                    <a href="#">Tutorials</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Side Widget -->
        <div class="card my-4">
          <h5 class="card-header">A note from Jake:</h5>
          <div class="card-body">
            <p>The keyboard community has grown and can be hard to keep up with. I found myself wanting to check r/mk, Geekhack, and Instagram to see the latest updates on interest checks and group buys.</p>
            <p> I am trying to spend less time on social media but still keep up with the keyboard scene, so I built this website as a portal to view what is hot. Right now it only streams from Geekhack and has no particular ordering or filtering applied, but this is a passion project and more is coming soon!</p>  
          </div>
        </div>

      </div>

    </div>
    <!-- /.row -->

  </div>
  <!-- /.container -->

  <!-- Footer -->
  <footer class="py-5 bg-dark">
    <div class="container">
      <p class="m-0 text-center text-white">Copyright &copy; Your Website 2020</p>
    </div>
    <!-- /.container -->
  </footer>

  <!-- Bootstrap core JavaScript -->
  
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
  <script src="/static/js/jquery.waypoints.min.js"></script>
  <script src="/static/js/infinite.min.js"></script>

  <script>window.onload = function exampleFunction() { 
    console.log(subTicker)

    //load the first page of data
    var page_n = ticker+1;
    $.ajax({
                type: "GET",
                url: "services?page="+ticker+"&inlimit=15", // name of url
                data : {    
                    page_n : page_n, //page_number
                },
            success: function (resp) {
                //loop
                // $('#posts').html('')
                console.log(resp)
                
                for(var respPiece in resp) {
                    val=resp[respPiece];
                    console.log(val)
                    $('#main_container').append(
                                    // "<a target='_blank' href="+val.imgLink+"><img src=" + val.imgLink +" style='width:150px'></a>"

                                    
                                    // "<div class=\"card mb-4\"><img class=\"card-img-top\" style=\"width: 100%;\" src=\""+val.imgLink+"\" alt=\"Card image cap\"><div class=\"card-body\"><h2 class=\"card-title\">Post Title</h2><p class=\"card-text\">zzzzzzzzzzzzzzzzzzzqqqqqqqqqqqqqqq</p><a href=\"#\" class=\"btn btn-primary\">Read More &rarr;</a></div><div class=\"card-footer text-muted\">Posted on January 1, 2020 by<a href=\"#\">Start Bootstrap</a></div></div>"

                                       "<div class=\"card mb-4\"><img class=\"card-img-top\" style=\"width: 100%;\" src=\""+val.imglink.substring(1)+"\" alt=\"Card image cap\"><div class=\"card-body\"><h2 class=\"card-title\">"+val.posttitle.substring(1)+"</h2><p class=\"card-text\"></p><a href=\""+val.sourcelink.substring(1)+"\" target=\"_blank\" class=\"btn btn-primary\">Read More &rarr;</a></div><div class=\"card-footer text-muted\"><p>"+val.mainpostedited.substring(1)+"</p><p>Posted on: "+val.postdate.substring(1)+"</p><a href=\""+val.sourcelink.substring(1)+"\" target=\"_blank\">Start Bootstrap</a></div></div>"



                                    )
                }

                try{$.each(resp.results, function(i, val) {
                    //apending posts
                    console.log('success 2')
                    console.log(val.imglink)
                            $('#main_container').append(
                                    // "<a target='_blank' href="+val.imgLink+"><img src=" + val.imgLink +" style='width:150px'></a>"

                                    
                                    // "<div class=\"card mb-4\"><img class=\"card-img-top\" style=\"width: 100%;\" src=\""+val.imgLink+"\" alt=\"Card image cap\"><div class=\"card-body\"><h2 class=\"card-title\">Post Title</h2><p class=\"card-text\">zzzzzzzzzzzzzzzzzzzqqqqqqqqqqqqqqq</p><a href=\"#\" class=\"btn btn-primary\">Read More &rarr;</a></div><div class=\"card-footer text-muted\">Posted on January 1, 2020 by<a href=\"#\">Start Bootstrap</a></div></div>"

                                       "<div class=\"card mb-4\"><img class=\"card-img-top\" style=\"width: 100%;\" src=\""+val.imglink+"\" alt=\"Card image cap\"><div class=\"card-body\"><h2 class=\"card-title\">"+val.posttitle+"</h2><p class=\"card-text\"></p><a href=\""+val.sourcelink+"\" target=\"_blank\" class=\"btn btn-primary\">Read More &rarr;</a></div><div class=\"card-footer text-muted\"><p>"+val.mainPostEdited+"</p><p>Posted on: "+val.postDate+"</p><a href=\""+val.source+"\" target=\"_blank\">Start Bootstrap</a></div></div>"



                                    )
                            
                     });} catch (error) {console.log(error)}
                },
            error: function () {console.log('big fails')}
             });
             ticker = ticker+1;    
    //finish loading the first page of data

    console.log(
                
                $(window).height(),
                $(window).scrollTop(),
                $(window).height(), 
                $(document).height());
    console.log($(window).innerHeight());
    // Function to be executed 
    };
    </script>
    
    <script> $(window).on('scroll', function() {
          if($(window).scrollTop() >= $('#main_container').offset().top + $('#main_container').outerHeight() - window.innerHeight) {
            console.log('Bottom');
            var page_n = ticker+1;
            // var memepass = ticker + 5
            $.ajax({
                type: "GET",
                url: "services?page="+ticker+"&inlimit=15", // name of url
                data : {    
                    page_n : page_n, //page_number
                },
            success: function (resp) {
                //loop
                // $('#posts').html('')
                console.log(resp)
                
                for(var respPiece in resp) {
                    val=resp[respPiece];
                    console.log(val)
                    $('#main_container').append(
                                    // "<a target='_blank' href="+val.imgLink+"><img src=" + val.imgLink +" style='width:150px'></a>"

                                    
                                    // "<div class=\"card mb-4\"><img class=\"card-img-top\" style=\"width: 100%;\" src=\""+val.imgLink+"\" alt=\"Card image cap\"><div class=\"card-body\"><h2 class=\"card-title\">Post Title</h2><p class=\"card-text\">zzzzzzzzzzzzzzzzzzzqqqqqqqqqqqqqqq</p><a href=\"#\" class=\"btn btn-primary\">Read More &rarr;</a></div><div class=\"card-footer text-muted\">Posted on January 1, 2020 by<a href=\"#\">Start Bootstrap</a></div></div>"

                                    "<div class=\"card mb-4\"><img class=\"card-img-top\" style=\"width: 100%;\" src=\""+val.imglink.substring(1)+"\" alt=\"Card image cap\"><div class=\"card-body\"><h2 class=\"card-title\">"+val.posttitle.substring(1)+"</h2><p class=\"card-text\"></p><a href=\""+val.sourcelink.substring(1)+"\" target=\"_blank\" class=\"btn btn-primary\">Read More &rarr;</a></div><div class=\"card-footer text-muted\"><p>"+val.mainpostedited.substring(1)+"</p><p>Posted on: "+val.postdate.substring(1)+"</p><a href=\""+val.sourcelink.substring(1)+"\" target=\"_blank\">Start Bootstrap</a></div></div>"


                                    )
                }

                try{$.each(resp.results, function(i, val) {
                    //apending posts
                    console.log('success 2')
                    console.log(val.imglink)
                            $('#main_container').append(
                                    // "<a target='_blank' href="+val.imgLink+"><img src=" + val.imgLink +" style='width:150px'></a>"

                                    
                                    // "<div class=\"card mb-4\"><img class=\"card-img-top\" style=\"width: 100%;\" src=\""+val.imgLink+"\" alt=\"Card image cap\"><div class=\"card-body\"><h2 class=\"card-title\">Post Title</h2><p class=\"card-text\">zzzzzzzzzzzzzzzzzzzqqqqqqqqqqqqqqq</p><a href=\"#\" class=\"btn btn-primary\">Read More &rarr;</a></div><div class=\"card-footer text-muted\">Posted on January 1, 2020 by<a href=\"#\">Start Bootstrap</a></div></div>"

                                       "<div class=\"card mb-4\"><img class=\"card-img-top\" style=\"width: 100%;\" src=\""+val.imgLink+"\" alt=\"Card image cap\"><div class=\"card-body\"><h2 class=\"card-title\">"+val.postTitle+"</h2><p class=\"card-text\"></p><a href=\""+val.source+"\" target=\"_blank\" class=\"btn btn-primary\">Read More &rarr;</a></div><div class=\"card-footer text-muted\"><p>"+val.mainPostEdited+"</p><p>Posted on: "+val.postDate+"</p><a href=\""+val.source+"\" target=\"_blank\">Start Bootstrap</a></div></div>"



                                    )
                            
                     });} catch (error) {console.log(error)}
                },
            error: function () {console.log('big fails')}
             });
            ticker = ticker+1;
            console.log("Clicked for",ticker,page_n);
          }
        });</script>
    <script>

        $('#showMoreButton').click(function(event){
            
            

            var page_n = ticker+1;
            // var memepass = ticker + 5
            $.ajax({
                type: "POST",
                url: "{% url 'pagination_p' %}", // name of url
                data : {    
                page_n : page_n, //page_number
                csrfmiddlewaretoken: '{{ csrf_token }}',
                
            },
            success: function (resp) {
                //loop
                // $('#posts').html('')
            
                $.each(resp.results, function(i, val) {
                    //apending posts
                    
                            $('#main_container').append(
                                    // "<a target='_blank' href="+val.imgLink+"><img src=" + val.imgLink +" style='width:150px'></a>"

                                    
                                    // "<div class=\"card mb-4\"><img class=\"card-img-top\" style=\"width: 100%;\" src=\""+val.imgLink+"\" alt=\"Card image cap\"><div class=\"card-body\"><h2 class=\"card-title\">Post Title</h2><p class=\"card-text\">zzzzzzzzzzzzzzzzzzzqqqqqqqqqqqqqqq</p><a href=\"#\" class=\"btn btn-primary\">Read More &rarr;</a></div><div class=\"card-footer text-muted\">Posted on January 1, 2020 by<a href=\"#\">Start Bootstrap</a></div></div>"

                                       "<div class=\"card mb-4\"><img class=\"card-img-top\" style=\"width: 100%;\" src=\""+val.imgLink+"\" alt=\"Card image cap\"><div class=\"card-body\"><h2 class=\"card-title\">"+val.postTitle+"</h2><p class=\"card-text\"></p><a href=\""+val.source+"\" target=\"_blank\" class=\"btn btn-primary\">Read More &rarr;</a></div><div class=\"card-footer text-muted\"><p>"+val.mainPostEdited+"</p><p>Posted on: "+val.postDate+"</p><a href=\""+val.source+"\" target=\"_blank\">Start Bootstrap</a></div></div>"



                                    )
                            
                     });
                },
            error: function () {}
             });
            ticker = ticker+1;
            console.log("Clicked for",ticker);

        })

    </script>

</body>

</html>
